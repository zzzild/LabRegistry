<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabel pendaftaran</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
      .navbar-nav a:hover {
          text-decoration: none;
          color: #fff !important;
          opacity: 1 !important;
          box-shadow: 0 2px 0 0 #fff;
        }

        .navbar-nav a {
            transition: box-shadow .5s;
        }

        h3{
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .wrapper , .container{
          margin-left: 7%;    
        }

        @media (max-width: 768px) {
        .container {
            margin-left: 0; 
              }
        }

        table {
            font-size: 14px;
            border-collapse: collapse; 
            width: 100%;    
        }

        .btn {
            font-size: 14px;
            padding: 3px 10px; 
            border: none; 
            cursor: pointer;
        }

        .btn:hover{
          font-size: 16px;
          transition: .3s;
        }

    </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg p-3" style="background-color: #0B60B0; ">
    <div class="container-fluid">
      <a class="navbar-brand fw-medium" href="#" style="color: #FFF6E9; font-family: monospace;">Apex<span class="link-info">Control</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
          <ul class="navbar-nav fs-6" >
            <li class="nav-item " >
              <a class="nav-link fw-medium  active mr-4 link-info " aria-current="page" href="#" style="padding: 15px; ">Dashboard</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link fw-medium active mr-4 link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href="#" style="padding: 15px; ">Recordings</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link fw-medium active mr-4 link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href="#" style="padding: 15px;">Reports</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link fw-medium link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href="#" style="padding: 15px;">Account</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link fw-medium active mr-4 link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover " href="#" style="padding: 15px;">Help & Support</a>
            </li>
          </ul>
      </div>
    </div>
  </nav>  

  <div class="wrapper mt-5 ">
      <h3 class="fs-2 fw-normal mb-2 text-secondary" style="font-family: Georgia, 'Times New Roman', Times, serif;">Recordings</h3>
    <div class="judul">
      <h3 class="fs-6 fw-light"></h3>
      <ul class="nav nav-underline">
        <li class="nav-item">
          <a class="nav-link active link-secondary"  data-content="home" href="#"><%= title %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link  link-secondary" style="padding: 10px;" data-content="acc" href="#">Diterima</a>
        </li>
        <li class="nav-item">
          <a class="nav-link link-secondary" style="padding: 10px;" data-content="member" href="#">Anggota</a>
        </li>
      </ul>
    </div>   
  </div>
    <hr>

    <div class="content">
      <div id="home" class="page-content">

        
        <div class="container">
          <form action="" class="d-flex mt-2" role="search">
            <input type="search" class="form-control me-2" placeholder="Masukan nama" aria-label="search">
            <button class="btn btn-secondary" type="submit">search</button>
          </form>
          <div class="table-responsive mt-3">
            <table class="table table-striped table-hover mx-aut" style="overflow-x: auto;">
                <thead>
                  <tr>
                    
                    <th scope="col">Nama</th>
                    <th scope="col">Npm</th>
                    <th scope="col">Kelas</th>
                    <th scope="col">Jurusan</th>
                    <th scope="col">Lokasi</th>
                    <th scope="col">TTL</th>
                    <th scope="col">Jenis Kelamin</th>
                    <th scope="col">Alamat</th>
                    <th scope="col">No hp</th>
                    <th scope="col">Email</th>
                    <th scope="col">Posisi</th>
                    <th scope="col">IPK</th>
                  </tr>
                </thead>
                <tbody">
                    <% for (let user of users){ %>
                    <tr data-userid="<%= user.id %>"> 
                        
                        <td scope="row"><%= user.Nama %> </td>
                        <td scope="row"><%= user.Npm %> </td>
                        <td scope="row"><%= user.Kelas %></td>
                        <td scope="row"><%= user.Jurusan %></td>
                        <td scope="row"><%= user.Lokasi %></td>
                        <td scope="row"><%= user.TTL %></td>
                        <td scope="row"><%= user.JenisKelamin %></td>
                        <td scope="row"><%= user.Alamat %></td>
                        <td scope="row"><%= user.NoHandphone %></td>
                        <td scope="row"><%= user.Email %></td>
                        <td scope="row"><%= user.Posisi %></td>
                        <td scope="row"><%= user.IPK %></td>

                        <td>  
                          <button onclick="moveToLulus('<%= user.id %>')"  style="background-color: rgba(116, 202, 255, 0.245);" class="btn">
                            <i class="bi bi-award-fill text-primary"></i>
                          </button>
                        </td>
                        <td>
                            <button onclick="deleteUser('<%= user.id %>')" style="background-color: rgba(255, 152, 152, 0.304);"  class="btn" id="logout">
                              <i class="bi bi-trash-fill text-danger"></i>
                          </button>
                        </td>
                    </tr>
                    <% } %>
                </tbody>
              </table>
          </div>
          </div>
      </div>

      <div id="acc" class="page-content wrapper">
        <h1>acc</h1>
      </div>

      <div id="member" class="page-content wrapper">
        <h1>member</h1>
      </div>

    </div>
  
    
  

      <script>
        document.addEventListener("DOMContentLoaded", function () {
      const menuLinks = document.querySelectorAll(".nav-link");
      const pageContents = document.querySelectorAll(".page-content");
    
      pageContents.forEach(function (content) {
        content.style.display = "none"; 
      });

      document.getElementById("home").style.display = "block";

      menuLinks.forEach(function (link) {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          const contentId = link.getAttribute("data-content");
          menuLinks.forEach(function (link) {
          link.classList.remove('active');
        });

        link.classList.add('active');
        pageContents.forEach(function (content) {
          content.classList.remove('active');
        });
        
        document.getElementById(contentId).classList.add('active');
          pageContents.forEach(function (content) {
            content.style.display = "none";
          });

          document.getElementById(contentId).style.display = "block";
        });
      });
    });

    // Delete user
    function deleteUser(userId) {
    if (confirm('Apakah Anda yakin ingin menghapus pengguna ini?')) {
        fetch(`/users/${userId}`, {
            method: 'DELETE'
        })
        .then(response => {
            if (response.ok) {
                const row = document.querySelector(`tr[data-userid="${userId}"]`);
                row.remove();
            } else {
                throw new Error('Gagal menghapus pengguna');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Terjadi kesalahan saat menghapus pengguna');
            const row = document.querySelector(`tr[data-userid="${userId}"]`);
            if (row) {
                row.remove();
            }
        });
    }
}


      </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>